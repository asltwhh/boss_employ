{"ast":null,"code":"import _defineProperty from 'babel-runtime/helpers/defineProperty';\nimport _extends from 'babel-runtime/helpers/extends';\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\nimport _createClass from 'babel-runtime/helpers/createClass';\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\nimport _inherits from 'babel-runtime/helpers/inherits';\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n/* tslint:disable:jsx-no-multiline-js */\n\n\nimport classnames from 'classnames';\nimport * as React from 'react';\nimport TouchFeedback from 'rmc-feedback';\nimport Carousel from '../carousel';\nimport Flex from '../flex';\n\nvar Grid = function (_React$Component) {\n  _inherits(Grid, _React$Component);\n\n  function Grid() {\n    _classCallCheck(this, Grid);\n\n    var _this = _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).apply(this, arguments));\n\n    _this.state = {\n      initialSlideWidth: 0\n    };\n\n    _this.renderCarousel = function (rowsArr, pageCount, rowCount) {\n      var prefixCls = _this.props.prefixCls;\n      var carouselMaxRow = _this.props.carouselMaxRow;\n      var pagesArr = [];\n\n      for (var pageIndex = 0; pageIndex < pageCount; pageIndex++) {\n        var pageRows = [];\n\n        for (var ii = 0; ii < carouselMaxRow; ii++) {\n          var rowIndex = pageIndex * carouselMaxRow + ii;\n\n          if (rowIndex < rowCount) {\n            pageRows.push(rowsArr[rowIndex]);\n          } else {\n            // 空节点为了确保末尾页的最后未到底的行有底线(样式中last-child会没线)\n            pageRows.push(React.createElement('div', {\n              key: 'gridline-' + rowIndex\n            }));\n          }\n        }\n\n        pagesArr.push(React.createElement('div', {\n          key: 'pageitem-' + pageIndex,\n          className: prefixCls + '-carousel-page'\n        }, pageRows));\n      }\n\n      return pagesArr;\n    };\n\n    _this.renderItem = function (dataItem, index, columnNum, renderItem) {\n      var prefixCls = _this.props.prefixCls;\n      var itemEl = null;\n\n      if (renderItem) {\n        itemEl = renderItem(dataItem, index);\n      } else {\n        if (dataItem) {\n          var icon = dataItem.icon,\n              text = dataItem.text;\n          itemEl = React.createElement('div', {\n            className: prefixCls + '-item-inner-content column-num-' + columnNum\n          }, React.isValidElement(icon) ? icon : React.createElement('img', {\n            className: prefixCls + '-icon',\n            src: icon\n          }), React.createElement('div', {\n            className: prefixCls + '-text'\n          }, text));\n        }\n      }\n\n      return React.createElement('div', {\n        className: prefixCls + '-item-content'\n      }, itemEl);\n    };\n\n    _this.getRows = function (rowCount, dataLength) {\n      // tslint:disable:prefer-const\n      var _this$props = _this.props,\n          columnNum = _this$props.columnNum,\n          data = _this$props.data,\n          renderItem = _this$props.renderItem,\n          prefixCls = _this$props.prefixCls,\n          _onClick = _this$props.onClick,\n          activeStyle = _this$props.activeStyle,\n          activeClassName = _this$props.activeClassName,\n          itemStyle = _this$props.itemStyle;\n      var rowsArr = [];\n      columnNum = columnNum;\n      var rowWidth = 100 / columnNum + '%';\n\n      var colStyle = _extends({\n        width: rowWidth\n      }, itemStyle);\n\n      for (var i = 0; i < rowCount; i++) {\n        var rowArr = [];\n\n        var _loop = function _loop(j) {\n          var dataIndex = i * columnNum + j;\n          var itemEl = void 0;\n\n          if (dataIndex < dataLength) {\n            var el = data && data[dataIndex];\n            itemEl = React.createElement(TouchFeedback, {\n              key: 'griditem-' + dataIndex,\n              activeClassName: activeClassName ? activeClassName : prefixCls + '-item-active',\n              activeStyle: activeStyle\n            }, React.createElement(Flex.Item, {\n              className: prefixCls + '-item',\n              onClick: function onClick() {\n                return _onClick && _onClick(el, dataIndex);\n              },\n              style: colStyle\n            }, _this.renderItem(el, dataIndex, columnNum, renderItem)));\n          } else {\n            itemEl = React.createElement(Flex.Item, {\n              key: 'griditem-' + dataIndex,\n              className: prefixCls + '-item ' + prefixCls + '-null-item',\n              style: colStyle\n            });\n          }\n\n          rowArr.push(itemEl);\n        };\n\n        for (var j = 0; j < columnNum; j++) {\n          _loop(j);\n        }\n\n        rowsArr.push(React.createElement(Flex, {\n          justify: 'center',\n          align: 'stretch',\n          key: 'gridline-' + i\n        }, rowArr));\n      }\n\n      return rowsArr;\n    };\n\n    return _this;\n  }\n\n  _createClass(Grid, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      this.setState({\n        initialSlideWidth: document.documentElement.clientWidth\n      });\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _classnames;\n\n      var _a = this.props,\n          prefixCls = _a.prefixCls,\n          className = _a.className,\n          data = _a.data,\n          hasLine = _a.hasLine,\n          isCarousel = _a.isCarousel,\n          square = _a.square,\n          activeStyle = _a.activeStyle,\n          activeClassName = _a.activeClassName,\n          restProps = __rest(_a, [\"prefixCls\", \"className\", \"data\", \"hasLine\", \"isCarousel\", \"square\", \"activeStyle\", \"activeClassName\"]);\n\n      var columnNum = restProps.columnNum,\n          carouselMaxRow = restProps.carouselMaxRow,\n          onClick = restProps.onClick,\n          renderItem = restProps.renderItem,\n          restPropsForCarousel = __rest(restProps, [\"columnNum\", \"carouselMaxRow\", \"onClick\", \"renderItem\"]);\n\n      var initialSlideWidth = this.state.initialSlideWidth;\n      columnNum = columnNum;\n      carouselMaxRow = carouselMaxRow;\n      var dataLength = data && data.length || 0;\n      var rowCount = Math.ceil(dataLength / columnNum);\n      var rowsArr = void 0;\n      var renderEl = void 0;\n\n      if (isCarousel) {\n        if (initialSlideWidth < 0) {\n          // carousel  server render. because carousel dependes on document\n          return null;\n        }\n\n        if (rowCount % carouselMaxRow !== 0) {\n          rowCount = rowCount + carouselMaxRow - rowCount % carouselMaxRow;\n        }\n\n        var pageCount = Math.ceil(rowCount / carouselMaxRow);\n        rowsArr = this.getRows(rowCount, dataLength);\n        var carouselProps = {};\n\n        if (pageCount <= 1) {\n          carouselProps = {\n            dots: false,\n            dragging: false,\n            swiping: false\n          };\n        }\n\n        renderEl = React.createElement(Carousel, _extends({\n          initialSlideWidth: initialSlideWidth\n        }, restPropsForCarousel, carouselProps), this.renderCarousel(rowsArr, pageCount, rowCount));\n      } else {\n        rowsArr = this.getRows(rowCount, dataLength);\n        renderEl = rowsArr;\n      }\n\n      var cls = classnames(prefixCls, className, (_classnames = {}, _defineProperty(_classnames, prefixCls + '-square', square), _defineProperty(_classnames, prefixCls + '-line', hasLine), _defineProperty(_classnames, prefixCls + '-carousel', isCarousel), _classnames));\n      return React.createElement('div', {\n        className: cls\n      }, renderEl);\n    }\n  }]);\n\n  return Grid;\n}(React.Component);\n\nexport default Grid;\nGrid.defaultProps = {\n  data: [],\n  hasLine: true,\n  isCarousel: false,\n  columnNum: 4,\n  carouselMaxRow: 2,\n  prefixCls: 'am-grid',\n  square: true,\n  itemStyle: {}\n};","map":{"version":3,"sources":["E:/workspaces/github/Boss_React/gzhipin-client1.0/node_modules/antd-mobile/es/grid/index.js"],"names":["_defineProperty","_extends","_classCallCheck","_createClass","_possibleConstructorReturn","_inherits","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","classnames","React","TouchFeedback","Carousel","Flex","Grid","_React$Component","_this","__proto__","getPrototypeOf","apply","arguments","state","initialSlideWidth","renderCarousel","rowsArr","pageCount","rowCount","prefixCls","props","carouselMaxRow","pagesArr","pageIndex","pageRows","ii","rowIndex","push","createElement","key","className","renderItem","dataItem","index","columnNum","itemEl","icon","text","isValidElement","src","getRows","dataLength","_this$props","data","_onClick","onClick","activeStyle","activeClassName","itemStyle","rowWidth","colStyle","width","rowArr","_loop","j","dataIndex","el","Item","style","justify","align","value","componentDidMount","setState","document","documentElement","clientWidth","render","_classnames","_a","hasLine","isCarousel","square","restProps","restPropsForCarousel","Math","ceil","renderEl","carouselProps","dots","dragging","swiping","cls","Component","defaultProps"],"mappings":"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","sourcesContent":["import _defineProperty from 'babel-runtime/helpers/defineProperty';\r\nimport _extends from 'babel-runtime/helpers/extends';\r\nimport _classCallCheck from 'babel-runtime/helpers/classCallCheck';\r\nimport _createClass from 'babel-runtime/helpers/createClass';\r\nimport _possibleConstructorReturn from 'babel-runtime/helpers/possibleConstructorReturn';\r\nimport _inherits from 'babel-runtime/helpers/inherits';\r\nvar __rest = this && this.__rest || function (s, e) {\r\n    var t = {};\r\n    for (var p in s) {\r\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\r\n    }if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n        if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\r\n    }return t;\r\n};\r\n/* tslint:disable:jsx-no-multiline-js */\r\nimport classnames from 'classnames';\r\nimport * as React from 'react';\r\nimport TouchFeedback from 'rmc-feedback';\r\nimport Carousel from '../carousel';\r\nimport Flex from '../flex';\r\n\r\nvar Grid = function (_React$Component) {\r\n    _inherits(Grid, _React$Component);\r\n\r\n    function Grid() {\r\n        _classCallCheck(this, Grid);\r\n\r\n        var _this = _possibleConstructorReturn(this, (Grid.__proto__ || Object.getPrototypeOf(Grid)).apply(this, arguments));\r\n\r\n        _this.state = {\r\n            initialSlideWidth: 0\r\n        };\r\n        _this.renderCarousel = function (rowsArr, pageCount, rowCount) {\r\n            var prefixCls = _this.props.prefixCls;\r\n\r\n            var carouselMaxRow = _this.props.carouselMaxRow;\r\n            var pagesArr = [];\r\n            for (var pageIndex = 0; pageIndex < pageCount; pageIndex++) {\r\n                var pageRows = [];\r\n                for (var ii = 0; ii < carouselMaxRow; ii++) {\r\n                    var rowIndex = pageIndex * carouselMaxRow + ii;\r\n                    if (rowIndex < rowCount) {\r\n                        pageRows.push(rowsArr[rowIndex]);\r\n                    } else {\r\n                        // 空节点为了确保末尾页的最后未到底的行有底线(样式中last-child会没线)\r\n                        pageRows.push(React.createElement('div', { key: 'gridline-' + rowIndex }));\r\n                    }\r\n                }\r\n                pagesArr.push(React.createElement(\r\n                    'div',\r\n                    { key: 'pageitem-' + pageIndex, className: prefixCls + '-carousel-page' },\r\n                    pageRows\r\n                ));\r\n            }\r\n            return pagesArr;\r\n        };\r\n        _this.renderItem = function (dataItem, index, columnNum, renderItem) {\r\n            var prefixCls = _this.props.prefixCls;\r\n\r\n            var itemEl = null;\r\n            if (renderItem) {\r\n                itemEl = renderItem(dataItem, index);\r\n            } else {\r\n                if (dataItem) {\r\n                    var icon = dataItem.icon,\r\n                        text = dataItem.text;\r\n\r\n                    itemEl = React.createElement(\r\n                        'div',\r\n                        { className: prefixCls + '-item-inner-content column-num-' + columnNum },\r\n                        React.isValidElement(icon) ? icon : React.createElement('img', { className: prefixCls + '-icon', src: icon }),\r\n                        React.createElement(\r\n                            'div',\r\n                            { className: prefixCls + '-text' },\r\n                            text\r\n                        )\r\n                    );\r\n                }\r\n            }\r\n            return React.createElement(\r\n                'div',\r\n                { className: prefixCls + '-item-content' },\r\n                itemEl\r\n            );\r\n        };\r\n        _this.getRows = function (rowCount, dataLength) {\r\n            // tslint:disable:prefer-const\r\n            var _this$props = _this.props,\r\n                columnNum = _this$props.columnNum,\r\n                data = _this$props.data,\r\n                renderItem = _this$props.renderItem,\r\n                prefixCls = _this$props.prefixCls,\r\n                _onClick = _this$props.onClick,\r\n                activeStyle = _this$props.activeStyle,\r\n                activeClassName = _this$props.activeClassName,\r\n                itemStyle = _this$props.itemStyle;\r\n\r\n            var rowsArr = [];\r\n            columnNum = columnNum;\r\n            var rowWidth = 100 / columnNum + '%';\r\n            var colStyle = _extends({ width: rowWidth }, itemStyle);\r\n            for (var i = 0; i < rowCount; i++) {\r\n                var rowArr = [];\r\n\r\n                var _loop = function _loop(j) {\r\n                    var dataIndex = i * columnNum + j;\r\n                    var itemEl = void 0;\r\n                    if (dataIndex < dataLength) {\r\n                        var el = data && data[dataIndex];\r\n                        itemEl = React.createElement(\r\n                            TouchFeedback,\r\n                            { key: 'griditem-' + dataIndex, activeClassName: activeClassName ? activeClassName : prefixCls + '-item-active', activeStyle: activeStyle },\r\n                            React.createElement(\r\n                                Flex.Item,\r\n                                { className: prefixCls + '-item', onClick: function onClick() {\r\n                                        return _onClick && _onClick(el, dataIndex);\r\n                                    }, style: colStyle },\r\n                                _this.renderItem(el, dataIndex, columnNum, renderItem)\r\n                            )\r\n                        );\r\n                    } else {\r\n                        itemEl = React.createElement(Flex.Item, { key: 'griditem-' + dataIndex, className: prefixCls + '-item ' + prefixCls + '-null-item', style: colStyle });\r\n                    }\r\n                    rowArr.push(itemEl);\r\n                };\r\n\r\n                for (var j = 0; j < columnNum; j++) {\r\n                    _loop(j);\r\n                }\r\n                rowsArr.push(React.createElement(\r\n                    Flex,\r\n                    { justify: 'center', align: 'stretch', key: 'gridline-' + i },\r\n                    rowArr\r\n                ));\r\n            }\r\n            return rowsArr;\r\n        };\r\n        return _this;\r\n    }\r\n\r\n    _createClass(Grid, [{\r\n        key: 'componentDidMount',\r\n        value: function componentDidMount() {\r\n            this.setState({\r\n                initialSlideWidth: document.documentElement.clientWidth\r\n            });\r\n        }\r\n    }, {\r\n        key: 'render',\r\n        value: function render() {\r\n            var _classnames;\r\n\r\n            var _a = this.props,\r\n                prefixCls = _a.prefixCls,\r\n                className = _a.className,\r\n                data = _a.data,\r\n                hasLine = _a.hasLine,\r\n                isCarousel = _a.isCarousel,\r\n                square = _a.square,\r\n                activeStyle = _a.activeStyle,\r\n                activeClassName = _a.activeClassName,\r\n                restProps = __rest(_a, [\"prefixCls\", \"className\", \"data\", \"hasLine\", \"isCarousel\", \"square\", \"activeStyle\", \"activeClassName\"]);\r\n            var columnNum = restProps.columnNum,\r\n                carouselMaxRow = restProps.carouselMaxRow,\r\n                onClick = restProps.onClick,\r\n                renderItem = restProps.renderItem,\r\n                restPropsForCarousel = __rest(restProps, [\"columnNum\", \"carouselMaxRow\", \"onClick\", \"renderItem\"]);\r\n\r\n            var initialSlideWidth = this.state.initialSlideWidth;\r\n\r\n            columnNum = columnNum;\r\n            carouselMaxRow = carouselMaxRow;\r\n            var dataLength = data && data.length || 0;\r\n            var rowCount = Math.ceil(dataLength / columnNum);\r\n            var rowsArr = void 0;\r\n            var renderEl = void 0;\r\n            if (isCarousel) {\r\n                if (initialSlideWidth < 0) {\r\n                    // carousel  server render. because carousel dependes on document\r\n                    return null;\r\n                }\r\n                if (rowCount % carouselMaxRow !== 0) {\r\n                    rowCount = rowCount + carouselMaxRow - rowCount % carouselMaxRow;\r\n                }\r\n                var pageCount = Math.ceil(rowCount / carouselMaxRow);\r\n                rowsArr = this.getRows(rowCount, dataLength);\r\n                var carouselProps = {};\r\n                if (pageCount <= 1) {\r\n                    carouselProps = {\r\n                        dots: false,\r\n                        dragging: false,\r\n                        swiping: false\r\n                    };\r\n                }\r\n                renderEl = React.createElement(\r\n                    Carousel,\r\n                    _extends({ initialSlideWidth: initialSlideWidth }, restPropsForCarousel, carouselProps),\r\n                    this.renderCarousel(rowsArr, pageCount, rowCount)\r\n                );\r\n            } else {\r\n                rowsArr = this.getRows(rowCount, dataLength);\r\n                renderEl = rowsArr;\r\n            }\r\n            var cls = classnames(prefixCls, className, (_classnames = {}, _defineProperty(_classnames, prefixCls + '-square', square), _defineProperty(_classnames, prefixCls + '-line', hasLine), _defineProperty(_classnames, prefixCls + '-carousel', isCarousel), _classnames));\r\n            return React.createElement(\r\n                'div',\r\n                { className: cls },\r\n                renderEl\r\n            );\r\n        }\r\n    }]);\r\n\r\n    return Grid;\r\n}(React.Component);\r\n\r\nexport default Grid;\r\n\r\nGrid.defaultProps = {\r\n    data: [],\r\n    hasLine: true,\r\n    isCarousel: false,\r\n    columnNum: 4,\r\n    carouselMaxRow: 2,\r\n    prefixCls: 'am-grid',\r\n    square: true,\r\n    itemStyle: {}\r\n};"]},"metadata":{},"sourceType":"module"}